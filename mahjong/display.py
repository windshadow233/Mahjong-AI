from termcolor import colored
import unicodedata

ASCII_TILES = {
    0: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ä¸€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¬ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    1: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€äºŒã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¬ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    2: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ä¸‰ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¬ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    3: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€å››ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¬ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    4: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ä¼ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¬ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    5: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€å…­ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¬ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    6: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ä¸ƒã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¬ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    7: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€å…«ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¬ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    8: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ä¹ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¬ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    9: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€â¬¤ã€€ â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    10: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€â¬¤ã€€ â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€â¬¤ã€€ â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    11: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒâ¬¤ã€€ã€€ â”ƒâ”ƒ
â”ƒã€€â¬¤ã€€ â”ƒâ”ƒ
â”ƒã€€ã€€â¬¤ â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    12: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    13: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒã€€â¬¤ã€€ â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    14: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    15: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒâ¬¤ â¬¤ ã€€â”ƒâ”ƒ
â”ƒã€€ã€€â¬¤ â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    16: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    17: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒâ¬¤ â¬¤ â¬¤ â”ƒâ”ƒ
â”ƒâ¬¤ â¬¤ â¬¤ â”ƒâ”ƒ
â”ƒâ¬¤ â¬¤ â¬¤ â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    18: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ä¸€ã€€â”ƒâ”ƒ
â”ƒã€€ğŸ¦ã€€â”ƒâ”ƒ
â”ƒã€€ç´¢ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    19: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ |  â”ƒâ”ƒ
â”ƒã€€    â”ƒâ”ƒ
â”ƒã€€ |  â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    20: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ |  â”ƒâ”ƒ
â”ƒã€€    â”ƒâ”ƒ
â”ƒã€€| | â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    21: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€| | â”ƒâ”ƒ
â”ƒã€€    â”ƒâ”ƒ
â”ƒã€€| | â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    22: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€| | â”ƒâ”ƒ
â”ƒã€€ |  â”ƒâ”ƒ
â”ƒã€€| | â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    23: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€| | â”ƒâ”ƒ
â”ƒã€€| | â”ƒâ”ƒ
â”ƒã€€| | â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    24: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ |  â”ƒâ”ƒ
â”ƒ | | |â”ƒâ”ƒ
â”ƒ | | |â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    25: r"""ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒ |/\| â”ƒâ”ƒ
â”ƒã€€    â”ƒâ”ƒ
â”ƒ |\/| â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    26: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒ | | |â”ƒâ”ƒ
â”ƒ | | |â”ƒâ”ƒ
â”ƒ | | |â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    27: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€æ±ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    28: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€å—ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    29: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¥¿ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    30: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€åŒ—ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    31: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    32: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ç™¼ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
    33: """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ä¸­ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/""",
}

AKA_MAN = """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒèµ¤ã€€ã€€â”ƒâ”ƒ
â”ƒã€€ä¼ã€€â”ƒâ”ƒ
â”ƒã€€ã€€ã€€â”ƒâ”ƒ
â”ƒã€€è¬ã€€â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/"""
AKA_PIN = """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒèµ¤ã€€ã€€â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒã€€â¬¤ã€€ â”ƒâ”ƒ
â”ƒâ¬¤ã€€ â¬¤ â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/"""
AKA_SOU = """ã€€ï¼¿ï¼¿ï¼¿ 
/ï¼¿ï¼¿ï¼¿/â”ƒ
â”ƒèµ¤ã€€ã€€â”ƒâ”ƒ
â”ƒã€€| | â”ƒâ”ƒ
â”ƒã€€ |  â”ƒâ”ƒ
â”ƒã€€| | â”ƒâ”ƒ
â”ƒï¼¿ï¼¿ï¼¿â”ƒ/"""

TENHOU_TILE_ASCII = {i: ASCII_TILES[i // 4] for i in range(136)}
TENHOU_TILE_ASCII[16] = AKA_MAN
TENHOU_TILE_ASCII[52] = AKA_PIN
TENHOU_TILE_ASCII[88] = AKA_SOU


def get_visual_length(s):
    length = 0
    for char in s:
        if unicodedata.east_asian_width(char) in ('F', 'W'):
            length += 2
        else:
            length += 1
    return length


def pad_string(s, target_length):
    visual_length = get_visual_length(s)
    padding_length = target_length - visual_length
    if padding_length > 0:
        left_length = padding_length // 2
        right_length = padding_length - left_length
        return ' ' * left_length + s + ' ' * right_length
    else:
        return s[:target_length + (visual_length - target_length) // 2]


def yellow(s):
    return colored(s, color='yellow', attrs=['bold', 'blink'])


def magenta(s):
    return colored(s, color='magenta', attrs=['bold', 'blink'])


def green(s):
    return colored(s, color='green', attrs=['bold', 'blink'])


def red(s):
    return colored(s, color='red', attrs=['bold', 'blink'])


def blue(s):
    return colored(s, color='blue', attrs=['bold', 'blink'])


def cyan(s):
    return colored(s, color='cyan', attrs=['bold', 'blink'])


def light_grey(s):
    return colored(s, color='light_grey', attrs=['bold', 'blink'])


def ascii_style_print(tile_groups, with_color='green'):
    ascii_group = []
    for tiles in tile_groups:
        ascii_str = list(map(lambda x: x.split('\n'), [TENHOU_TILE_ASCII[_] for _ in tiles]))
        ascii_str = list(map(lambda x: 'ã€€'.join(x), zip(*ascii_str)))
        ascii_group.append(ascii_str)
    ascii_group_str = '\n'.join(map(lambda x: 'ã€€ã€€'.join(x), zip(*ascii_group)))
    if with_color:
        return globals()[with_color](ascii_group_str)
    return ascii_group_str


chinese_numerals = {1: 'ä¸€', 2: 'äºŒ', 3: 'ä¸‰', 4: 'å››', 5: 'äº”', 6: 'å…­', 7: 'ä¸ƒ', 8: 'å…«', 9: 'ä¹'}
TILE_STRING_DICT = {
    **{i: f"{chinese_numerals[i + 1]}è¬" for i in range(9)},
    **{i: f"{chinese_numerals[i - 8]}é¥¼" for i in range(9, 18)},
    **{i: f"{chinese_numerals[i - 17]}ç´¢" for i in range(18, 27)},
    27: "æ±", 28: "å—", 29: "è¥¿", 30: "åŒ—", 31: "ç™½", 32: "ç™¼", 33: "ä¸­"
}
TENHOU_TILE_STRING_DICT = {i: TILE_STRING_DICT[i // 4] for i in range(136)}
TENHOU_TILE_STRING_DICT[16] = 'èµ¤äº”è¬'
TENHOU_TILE_STRING_DICT[52] = 'èµ¤äº”é¥¼'
TENHOU_TILE_STRING_DICT[88] = 'èµ¤äº”ç´¢'

TILE_UNICODE = "ğŸ€‡ğŸ€ˆğŸ€‰ğŸ€ŠğŸ€‹ğŸ€ŒğŸ€ğŸ€ğŸ€ğŸ€™ğŸ€šğŸ€›ğŸ€œğŸ€ğŸ€ğŸ€ŸğŸ€ ğŸ€¡ğŸ€ğŸ€‘ğŸ€’ğŸ€“ğŸ€”ğŸ€•ğŸ€–ğŸ€—ğŸ€˜ğŸ€€ğŸ€ğŸ€‚ğŸ€ƒğŸ€†ğŸ€…ğŸ€„ï¸"
TENHOU_TILE_UNICODE_DICT = {i: TILE_UNICODE[i // 4] for i in range(136)}
TENHOU_TILE_UNICODE_DICT[16] = 'èµ¤ğŸ€‹'
TENHOU_TILE_UNICODE_DICT[52] = 'èµ¤ğŸ€'
TENHOU_TILE_UNICODE_DICT[88] = 'èµ¤ğŸ€”'
